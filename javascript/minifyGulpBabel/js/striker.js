"use strict";var globals={postHistory:{},visit:{},home:{},design:{},book:{},followmeTmp:{},data:{},edits:{},positionImg:{},pictures:{}},varStrik={settingMusic:{at:"&",searchKey:"keyname",insertTpl:"&${cod}",displayTpl:"<li class=\"ss-list-suggert musicTagged\"><div class=\"ss-columngh picgut miscTag\"><img src=\"${thumbnbail}\" alt=\"${name}\" /></div><div class=\"ss-columngh txthis\"><div class=\"ss-text-searh\"><strong>${keyname}</strong></div><div class=\"ss-text-searh\">${name}</div><div class=\"ss-text-searh\">${artist}</div></div></li>",limit:20,callbacks:{remoteFilter:function(e,t){2<e.length&&varStrik.searchSong({text:e}).then(function(e){e.length&&t(e)}).catch(function(){})}}},settingEmojis:{at:":",searchKey:"strn",data:emojis,displayTpl:"<li>${strn} <img src=\"${srcImg}\"\" height=\"20\" width=\"20\" /></li>",insertTpl:"${code}",delay:400,limit:15},settingTagging:{at:"@",searchKey:"nick",insertTpl:"@${nick}",displayTpl:"<li class=\"ss-list-suggert\"><div class=\"ss-columngh picgut\"><img src=\""+consts.domain+"${pDir}\" alt=\"${nick}\" /></div><div class=\"ss-columngh txthis\"><div class=\"ss-text-searh\"><strong>${nick}</strong></div><div class=\"ss-text-searh\">${nombres}${apellidos}</div></div></li>",limit:10,callbacks:{remoteFilter:function(e,t){var a=$(void 0);a.data("active",!1),2<e.length&&varStrik.searchNick({nick:e}).then(function(e){e.users.length&&t(e.users)}).catch(function(){})}}},searchSong:function(e){return new Promise(function(t){clearTimeout(varStrik.vari.searchSongText),varStrik.vari.searchSongText=setTimeout(function(){chatHist.emit("searchSong",{text:e.text,atwho:!0},t)},500)})},searchNick:function(e){return new Promise(function(t){clearTimeout(varStrik.vari.searchNickText),varStrik.vari.searchNickText=setTimeout(function(){chatHist.emit("searching",{val:e.nick},t)},500)})},insertTextAtCursor:function(e){var t,a;window.getSelection?(t=window.getSelection(),t.getRangeAt&&t.rangeCount&&(a=t.getRangeAt(0),a.deleteContents(),a.insertNode(document.createTextNode(e)))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=e)},editPaste:function(e){if(e.preventDefault(),e.clipboardData&&e.clipboardData.getData){var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}else if(window.clipboardData&&window.clipboardData.getData){var a=window.clipboardData.getData("Text");varStrik.insertTextAtCursor(a)}},validaSize:function(e){return new Promise(function(t){if(20661>e.size)t(4);else{chatHist.emit("ifSize",{name:e.name,size:e.size,nick:localStorage.nick},function(e){t(e)})}})},upLoadFullcanvasdataImg:function(e){switch(e.opt){case"perfil":imgData.proportion=1,imgData.tag=".imgPerfilCont>.imgPerfil-visit, .previewPho",doCanvasDOMCrop.prepareDOM(e.img,e.opt,0);break;case"banner":imgData.proportion=4.3,imgData.tag="header.bannered",doCanvasDOMCrop.prepareDOM(e.img,e.opt,0);break;case"background":imgData.tag="body",imgData.proportion=e.img.width/e.img.height,doCanvasDOMCrop.prepareDOM(e.img,e.opt,0);break;default:}},sideBars:function(e,t){var a,i={},s=0,r=e.touchableLeft?e.touchableLeft.offsetWidth/2:2,o=e.touchableRight?e.touchableRight.offsetWidth/2:2,n=!1;varStrik.data.position2X=0,e.content.addEventListener("touchstart",function(e){var t=e.changedTouches[0].pageX;s=e.changedTouches[0].pageX,i.x=t,a=new Date().getTime(),t>window.innerWidth-30?varStrik.data.rightBar=!0:30>t&&(varStrik.data.leftBar=!0)},!1),e.content.addEventListener("touchmove",function(t){var s=new Date().getTime()-a,r=i.x-t.changedTouches[0].pageX;if(r=0>r?-1*r:r,150<s&&50<r&&(varStrik.data.rightBar||varStrik.data.leftBar))varStrik.data.rightBar?(varStrik.data.position2X=e.touchableRight.offsetWidth-r,e.touchableRight.style.transform="translate("+(0<varStrik.data.position2X?varStrik.data.position2X:0)+"px)"):varStrik.data.leftBar&&(varStrik.data.position2X=r-e.touchableLeft.offsetWidth,e.touchableLeft.style.transform="translate("+(0<varStrik.data.position2X?0:varStrik.data.position2X)+"px)");else if(varStrik.data.rightBarActive&&!varStrik.data.rightBar&&150<s&&60<r)e.touchableRight.style.transform="translate("+(r>e.touchableRight.offsetWidth?e.touchableRight.offsetWidth:r)+"px)",i.x=r,n=!0;else if(varStrik.data.leftBarActive&&!varStrik.data.leftBar&&150<s&&60<r){var o=-1*r,d=-1*e.touchableLeft.offsetWidth;varStrik.data.position2X=o,e.touchableLeft.style.transform="translate("+(o<d?d:o)+"px)",varStrik.data.position2X=o,n=!0}},!1),e.content.addEventListener("touchend",function(){varStrik.data.rightBar&&200>varStrik.data.position2X&&0!==varStrik.data.position2X&&!varStrik.data.rightBarActive?(e.touchableRight.style.transform="translate(0)",varStrik.data.rightBarActive=!0,setTimeout(function(){t({err:!1,type:"showRight"})},100),varStrik.data.leftBarActive&&t({err:!1,type:"hideLeft"})):!varStrik.data.leftBarActive&&varStrik.data.leftBar&&0!==varStrik.data.position2X&&-180<varStrik.data.position2X?(e.touchableLeft.style.transform="translate(0)",varStrik.data.leftBarActive=!0,setTimeout(function(){t({err:!1,type:"showLeft"})},100),varStrik.data.rightBarActive&&t({err:!1,type:"hideRight"})):varStrik.data.rightBar&&199<varStrik.data.position2X?(e.touchableRight.style.transform="translate("+(e.touchableRight.offsetWidth+10)+"px)",t({err:!0})):varStrik.data.rightBarActive&&!varStrik.data.rightBar&&n?(n=!1,120<i.x?(e.touchableRight.style.transform="translate("+(e.touchableRight.offsetWidth+10)+"px)",varStrik.data.rightBarActive=!1,t({err:!1,type:"hideRight"})):(e.touchableRight.style.transform="translate(0)",t({err:!0}))):varStrik.data.leftBarActive&&!varStrik.data.leftBar&&n&&(n=!1,varStrik.data.position2X<-1*o?t({err:!1,type:"hideLeft"}):(e.touchableLeft.style.transform="translate(0)",t({err:!0}))),varStrik.data.rightBar=!1,varStrik.data.leftBar=!1,varStrik.data.position2X=0})},swipedetect:function(e,t){var a=Math.abs;t("");var i,s,r,o,n,d,c=e,l="",p=!1,m=!!("ontouchstart"in window)||!!("ontouchstart"in document.documentElement)||!!window.ontouchstart||!!window.Touch||!!window.onmsgesturechange||window.DocumentTouch&&window.document instanceof window.DocumentTouch,u=t||function(){};c.addEventListener("touchstart",function(t){var e=t.changedTouches[0];i=e.pageX,s=e.pageY,d=new Date().getTime()},!1),c.addEventListener("touchmove",function(){},!1),c.addEventListener("touchend",function(t){var e=t.changedTouches[0];r=e.pageX-i,o=e.pageY-s,n=new Date().getTime()-d,n<=300&&(a(r)>=150&&a(o)<=100?l=0>r?"left":"right":a(o)>=150&&a(r)<=100?l=0>o?"up":"down":l=""),u(l)},!1),m||(document.body.addEventListener("mousedown",function(t){if(isContained(c,t)){var e=t;l="none",dist=0,i=e.pageX,s=e.pageY,d=new Date().getTime(),p=!0,t.preventDefault()}},!1),document.body.addEventListener("mousemove",function(){},!1),document.body.addEventListener("mouseup",function(t){if(p){var e=t;r=e.pageX-i,o=e.pageY-s,n=new Date().getTime()-d,n<=300&&(a(r)>=150&&a(o)<=100?l=0>r?"left":"right":a(o)>=150&&a(r)<=100&&(l=0>o?"up":"down")),u(l),p=!1}},!1))},overflowWindow:function(e){se("body").style.overflow=e.hide?"hidden":"visible"},createChart:function(e){var t=d3.layout.pie().value(function(e){return e}).sort(null),a=(280<e.offsetWidth?280:e.offsetWidth)/1.4,i=a,s=a/2-15,r=s-8,o=["#f2503f","#ea0859","#404F70"],n=d3.select(e).append("svg").attr({width:a,height:i,class:"shadow"}).append("g").attr({transform:"translate("+a/2+","+i/2+")"});chatVar.logic.createGradient(n,"gradient",o[0],o[1]);var d=d3.svg.arc().innerRadius(r).outerRadius(s).startAngle(0).endAngle(2*Math.PI),c=d3.svg.arc().innerRadius(r).outerRadius(s).startAngle(0),l=n.append("path").attr({d:d}).style({fill:o[2]}),p=n.append("path").datum({endAngle:0}).attr({d:c,class:"porcenty"}).style({fill:"url(#gradient)"}),m=n.append("text").text("0%").attr({class:"middleText","text-anchor":"middle",dy:15,dx:0}).style({fill:o[1],"font-size":"40px"});return{arcLine:c,pathChart:p,middleCount:m}},setPercent:function(e){var t=function(t,a){t.attrTween("d",function(i){var s=d3.interpolate(i.endAngle,a);return function(a){return i.endAngle=s(a),e.element.arcLine(i)}})},a=d3.select(se(e.element.patchPorcenty)),i=se(e.element.svgSelector+" .middleText");(function(e){a.transition().duration(100).ease("bounce").call(t,2*Math.PI*e.ragio),i.textContent=e.percent+"%"})(e)},checkUpdates:function(){chatHist.emit("checkFirstTime",{},function(e){e.firstTime&&(boot.logic.popUpAlert({time:5e3,msg:"Hemos realizado una actualizaci\xF3n y a que no adivinas a qui\xE9n le toca actualizarse \uD83D\uDE0F!!"}),setTimeout(function(){window.location.replace("/firsttime/")},5e3))})},clearLogs:function(){"undefined"!=typeof SERVER&&SERVER&&(console.log=function(){})},deleteDragsSign:function(){si(".chat .-chat-showAdd",function(e){e.remove()})},generateTime:function(){var e=timeDate()[3],t=e.getTime();return e.setTime(t+36000000000),e.toGMTString()},serialize:function(e){return new Promise(function(t){var a={};[].forEach.call(e.querySelectorAll("input, select, textarea"),function(e){e.tagName.match(/(INPUT|SELECT|TEXTAREA)/g)&&(a[e.name]=e.value)}),t(a)})},closeSession:function(t){t.preventDefault(),notifi.emit("dropSess",{nick:localStorage.nick},function(e){if(e.res){localStorage.clear(),document.cookie="fotgna=0000";javascript:location.reload()}})},base64ToArrayBuffer:function(t){for(var e,i=window.atob(t),s=i.length,r=new Uint8Array(s),o=0;o<s;o++)e=i.charCodeAt(o),r[o]=e;return r.buffer},bytesToSize:function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/6.931471805599453));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},splitWords:function(e,t){return[e.substr(0,t),e.substr(t)]},vineTM2:function(){var e=this,t=document.createElement("iframe");t.setAttribute("allowFullScreen",""),t.src=e.dataset.embed,t.className="vineIfraPreview",e.parentNode.appendChild(t,e),e.style.display="none"},embedYoutube:function(){var e=this,t=this.elem,a=aleatorio(1,1e5),i=t.parentNode,s=i.innerHTML,r=new Promise(function(r){t.id="mediaYoutube"+a,youtubeApi2({id:t.dataset.id,payer:"mediaYoutube"+a,width:t.offsetWidth},function(){i.innerHTML=s,r(!0),e.fn()})});return r},data:{},vari:{},anima:{showNav:function(){$(this.nextSibling).fadeToggle(500)}},hideSaerch:function(){se("#search>form")||$("#search").fadeOut(500)},shoeSaerch:function(){this.value&&3<this.value.length&&$("#search").fadeIn(500)},searchUser:function(){var e=this;e.value&&3<e.value.length?($("#search").fadeIn(500),se("#search").innerHTML="<span class=\"loadsIcon\"><i class=\"animate-spin demo-iconed-load\"></i> Cargando...</span>",clearTimeout(varStrik.vari.searUser),varStrik.vari.searUser=setTimeout(function(){chatHist.emit("searching",{val:e.value},function(e){e.err?se("#search").innerHTML="<h4 class=\"icon-warning\">No has inciado sesi\xF3n</4>":e.users.length?(se("#search").innerHTML="",e.users.forEach(function(t,a){$("#search").append(html.dmSearchUser(t)),a+1===e.users.length&&GNGN()})):se("#search").innerHTML="<h4 class=\"icon-warning\">No hay resultados!!</4>"})},400)):$("#search").fadeOut(800)},promptOfFollow:function(e){var t=new Promise(function(t){chatHist.emit("prompt",e,t)});return t},positioMenuContext:function(e){var t=$(e).offset(),a=se("body").offsetHeight-t.top,i=se("body").offsetWidth,s=t.left+e.offsetWidth;if(e.offsetHeight>a&&s>i)return 0;return e.offsetHeight>a?1:s>i?2:void 0},rightClick:{addSongToListplayer:function(){se("#contextmenu").remove(),chatHist.emit("allListplayer",{opt:1,lp:this.dataset.lp,wm:this.dataset.wm},function(e){10===e.res?alertPop({time:1500,msg:"Para crear listas debes de estar registrado",err:!0}):2===e.res&&alertPop({time:1500,msg:"Se ha agregado correctamente",err:!1})})},addToListaplayer:function(e){"1"===e.dataset.clicked?!se("#contextmenu .-context-listPlayers")&&($("#contextmenu>ul>li[data-opt=\"0\"]").append("<div data-poso=\"right\" data-posi=\"top\" class=\"-context-listPlayers\"><span class=\"loadsIcon\"><i class=\"animate-spin demo-iconed-load\"></i> Buscando...</span></div>"),chatHist.emit("allListplayer",{uss:localStorage.user,opt:0},function(t){se("#contextmenu .-context-listPlayers").innerHTML="<ul></ul>",t.length&&t.forEach(function(a,i){if($("#contextmenu .-context-listPlayers>ul").append("<li data-wm=\""+e.dataset.cod+"\" data-lp=\""+a.cod+"\" title=\""+a.name+"\"><span class=\"noSpace\">"+a.name+"</span><i class=\"icon-clipboard\"></i> </li>"),i+1===t.length){se("#contextmenu .-context-listPlayers").style.maxHeight=se("body").offsetHeight/2+"px";var s=varStrik.positioMenuContext(se("#contextmenu .-context-listPlayers"));1===s?se("#contextmenu .-context-listPlayers").dataset.posi="bottom":0===s?(se("#contextmenu .-context-listPlayers").dataset.posi="bottom",se("#contextmenu .-context-listPlayers").dataset.poso="left"):2===s&&(se("#contextmenu .-context-listPlayers").dataset.poso="left"),si(".-context-listPlayers li",function(e){e.addEventListener("click",varStrik.rightClick.addSongToListplayer,!1)})}})})):se("#contextmenu .-context-listPlayers")&&se("#contextmenu .-context-listPlayers").remove()},shareMusic:function(e){if(se(".music-box[data-cod=\""+e.dataset.cod+"\"]")){var t=JSON.parse(se(".music-box[data-cod=\""+e.dataset.cod+"\"]").dataset.infos),a=document.createElement("div");a.id="boxShare",a.innerHTML=html.dmMusicShare(t),se("body").appendChild(a),$("body").append("<article class=\"ss-dummi ng-scope\" ng-click=\"showChat()\"></article>"),si(".ss-dummi, #boxShare>i",function(e){e.addEventListener("click",function(){si(".ss-dummi, #boxShare",function(e){e.remove()})},!1)});var i=$(".-boxShare-history textarea").atwho(varStrik.settingTagging).atwho(varStrik.settingEmojis);i.caret("pos",47),i.focus().atwho("run"),se("#boxShare .-chare").addEventListener("click",function(){var t={htry:se("#boxShare .-boxShare-history>textarea").value,sg:e.dataset.cod};this.style.display="none",se("#boxShare .mediaShare>div:nth-child(3)").style.visibility="visible",chatHist.emit("allListplayer",{opt:1,wm:e.dataset.cod},function(e){2===e.res&&showHistory({file:"Aud_"+e.sg,user:localStorage.user,history:t.htry}).then(function(){si(".ss-dummi, #boxShare",function(e){e.remove()})}).catch(function(){})})},!1)}},newlistPlayer:function(e){se("#boxShareMusic")&&se("#boxShareMusic").remove(),$("body").append("<article class=\"ss-dummi ng-scope\" ng-click=\"showChat()\"></article>");var t=document.createElement("div");t.id="boxShareMusic",t.innerHTML=html.dmCreateListPlayer,se("body").appendChild(t),si("#boxShareMusic>i, .ss-dummi",function(e){e.addEventListener("click",function(){si("#boxShareMusic, .ss-dummi",function(e){e.remove()})},!1)}),se("#boxShareMusic>form").addEventListener("submit",function(t){t.preventDefault(),html.noRunScript(se("#boxShareMusic>form input[type=\"text\"]").value,function(t){chatHist.emit("createList",{name:t,wm:e.dataset.cod},function(e){si("#boxShareMusic, .ss-dummi",function(e){e.remove()}),2===e.res?(alertPop({time:2500,msg:"Se ha creado correctamente tu lista de reproducci\xF3n y se le ha agregado la canci\xF3n",err:!1}),showHistory({file:"lsp_"+e.lp,user:localStorage.user,history:"@"+localStorage.nick+" ha creado \""+t+"\" su nueva lista de reproducci\xF3n"}).catch(function(){})):1===e.res&&alertPop({time:1500,msg:"Para crear listas debes de estar registrado",err:!0})})}),se("#boxShareMusic").innerHTML="<span class=\"loadsIcon\"><i class=\"animate-spin demo-iconed-load\"></i> Creando lista de reproducci\xF3n!!</span>"},!1)},removeSg:function(e){var t=se(".music-box[data-cod=\""+e.dataset.cod+"\"]").dataset;alertPop({opt:0,msg:"Estas seguro de remover la canci\xF3n de la lista",err:!0},function(e){e&&chatHist.emit("allListplayer",{sg:t.scod,opt:2},function(e){1===e.res?alertPop({time:1500,msg:"No eres el creador de la lista de reproducci\xF3n, @"+localStorage.nick+" quieres problemas!!",err:!0}):2===e.res&&(si(".sound-now>div>.music-box[data-scod=\""+t.scod+"\"], .contentMsuci>.music-box[data-scod=\""+t.scod+"\"]",function(e){e.remove()}),alertPop({time:1500,msg:"Se ha quitado la canci\xF3n con exito",err:!0}))})})},getURL:function(e){se("#boxShareMusic")&&se("#boxShareMusic").remove(),$("body").append("<article class=\"ss-dummi ng-scope\" ng-click=\"showChat()\"></article>");var t=document.createElement("div");t.id="boxShareMusic",t.innerHTML="<i class=\"cancelButton icon-cancel-circled-3\"></i> <h3>URL de la canci\xF3n</h3> <div><input type=\"text\" readonly value=\""+varStrik.urlMedia+"/player/?sg="+e.dataset.cod+"\"/></div><button class=\"ss-button-primary\">Copiar</button>",se("body").appendChild(t),se("#boxShareMusic>button").addEventListener("click",function(){function e(){se("#boxShareMusic")&&(se("#boxShareMusic").className="animated zoomOut",setTimeout(function(){si("#boxShareMusic, .ss-dummi",function(e){e.remove()})},700))}var t=se("#boxShareMusic input[type=\"text\"]");t.select();try{var a=document.execCommand("copy"),i=a?"successful":"unsuccessful";alertPop({time:1500,msg:"Guardado en el portapapeles!",err:!1}),e()}catch(e){alertPop({time:4e3,msg:"Tu buscador de internet no permite copiar, haslo manualmente",err:!0})}},!1),si("#boxShareMusic>i, .ss-dummi",function(e){e.addEventListener("click",function(){si("#boxShareMusic, .ss-dummi",function(e){e.remove()})},!1)})},main:function(e){se("#contextmenu")&&se("#contextmenu").remove(),e.preventDefault();var t=document.createElement("div");t.id="contextmenu",t.style.top=e.pageY-10+"px",t.style.left=e.pageX+10+"px",t.innerHTML="<ul><li data-clicked=\"0\" data-cod=\""+this.dataset.cod+"\" data-opt=\"0\" class=\"icon-list-add\">Agregar <i class=\"icon-right-open-3\"></i></li><li data-clicked=\"0\" data-cod=\""+this.dataset.cod+"\" data-opt=\"1\" class=\"icon-share-2\">Publicar</li><li data-clicked=\"0\" data-cod=\""+this.dataset.cod+"\" data-opt=\"4\" class=\"icon-doc-new\">Crear nueva lista</li>"+(this.dataset.scod?"<li data-clicked=\"0\" data-cod=\""+this.dataset.cod+"\" data-opt=\"2\" class=\"icon-trash-6\">Quitar de la lista</li>":"")+"<li data-clicked=\"0\" data-cod=\""+this.dataset.cod+"\" data-opt=\"3\" class=\"icon-link-3\">Obtener url</li></ul>",se("body").appendChild(t);var a=varStrik.positioMenuContext(t);0===a?(t.style.left=e.screenX-t.offsetWidth-50+"px",t.style.top=e.pageY-t.offsetHeight+"px"):1===a?t.style.top=e.pageY-t.offsetHeight+"px":2===a&&(t.style.left=e.screenX-t.offsetWidth-20+"px"),si("#contextmenu>ul>li",function(e){e.addEventListener("click",function(){switch(e.dataset.opt){case"0":e.dataset.clicked="0"===e.dataset.clicked?1:0,varStrik.rightClick.addToListaplayer(e);break;case"1":varStrik.rightClick.shareMusic(e),se("#contextmenu").remove();break;case"4":varStrik.rightClick.newlistPlayer(e),se("#contextmenu").remove();break;case"2":varStrik.rightClick.removeSg(e),se("#contextmenu").remove();break;case"3":varStrik.rightClick.getURL(e),se("#contextmenu").remove();}},!1)}),se("html").addEventListener("click",function(e){!e.target.className.match(/icon-list-add/)&&se("#contextmenu")&&se("#contextmenu").remove()})}},postionCursoTextCOment:function(e){var t=e.which,a=String.fromCharCode(t).toLowerCase();varStrik.vari.banderaNick&&8===t&&(varStrik.vari.Srachnick=varStrik.vari.Srachnick.substr(0,varStrik.vari.Srachnick.length-1),""===varStrik.vari.Srachnick&&varStrik.cancelSearchNick())},showResultUsers:function(e){this;varStrik.vari.positioCursoNick=this.posi,se(".showNickuserInfo")&&(se(".showNickuserInfo").innerHTML=""),!e.err&&e.users.length&&e.users.forEach(function(t,a){$(".showNickuserInfo").append(html.dmSearchUser(t)),a+1===e.users.length&&se(".showNickuserInfo>#resultUserSreah a")&&si(".showNickuserInfo>#resultUserSreah a",function(e){e.addEventListener("click",varStrik.addNickToTextField,!1)})})},addNickToTextField:function(e){e.preventDefault();var t=varStrik.vari.textBosSrachNick[0],a=new RegExp("\\b"+varStrik.vari.Srachnick.substr(1)+"\\b","g");t.value=t.value.replace(a,this.dataset.nick+" "),varStrik.cancelSearchNick(),varStrik.vari.textBosSrachNick[0].focus()},mainSearchNick:function(e){$(e).unbind().searchNick("@"),se(e).addEventListener("keyup",varStrik.postionCursoTextCOment,!1)},searchSongArray:function(e,t){for(var a=!1,s=0;s<e.length;s++)e[s].cod===t&&(a=!0);return a},cancelSearchNick:function(){varStrik.vari.banderaNick=!1,varStrik.vari.Srachnick="",se(".showNickuserInfo")&&se(".showNickuserInfo").remove()},urlMedia:"https://fotogena.co",showTransitions:function(e){$("body").append(html.waitLoadSrc()),setTimeout(function(){se("ss-div.transition").dataset.fade="in",e&&e.oldElem&&e.oldElem.classList.add("ss-blur-element")},100)},hideTransitions:function(e){e&&e.newElem&&(e.newElem&&e.newElem.classList.remove("ss-blur-element"),si(".ss-blur-element",function(e){e.remove()})),se("ss-div.transition")&&(se("ss-div.transition").dataset.fade="out",setTimeout(function(){se("ss-div.transition").remove()},500))},newReply:function(e){if(e.preventDefault(),!se("#andrea .ss-button-unava")){var t=this.querySelector("textarea"),a=t.value;t.value="",se("#andrea .county")&&(se("#andrea .county").textContent=varStrik.limitHistoryText),noSpace(a)?notifi.emit("responceNew",{opt:1,cod:t.dataset.message,message:a,tipe:2},function(e){respDom(e)}):errorMsg("T\xFA respuesta no puede estar vacia",1,2e3)}else alertPop({time:3e3,msg:"Has pasado el limite de caracteres, disminuye palabras por favor :)",err:!1})},countText:function e(){var e=this.value.length,t=varStrik.limitHistoryText-e,a=se("#andrea .county");-1<t?(a.textContent=t,a.dataset.count=t,se("#andrea button").classList.add("ss-button-success"),se("#andrea button").classList.remove("ss-button-unava")):(se("#andrea button").classList.remove("ss-button-success"),se("#andrea button").classList.add("ss-button-unava"),a.textContent="")},router:{domDesign:function(){function e(){"undefined"==typeof design?setTimeout(e,100):design.logic.loadDom()}tmplates.appendScript({class:"designJs",src:"/public/"+(SERVER?"js":"Js")+"/ss-design.js",opt:"js"}),tmplates.appendScript({class:"designCss",src:"/public/"+(SERVER?"css":"styles")+"/ss-design.css",opt:"css"}),e()},domVisit:function(e){function t(){"undefined"==typeof visit?setTimeout(t,100):visit.logic.loadDom(a.dataset.nick).then(function(){a.dataset.selected=0}).catch(function(){})}e.preventDefault();var a=this;a.dataset.selected&&"0"!==a.dataset.selected||(a.dataset.selected=1,tmplates.appendScript({class:"visitJs",src:"/public/"+(SERVER?"js":"Js")+"/ss-visit.js",opt:"js"}),t())},domHome:function(e){function t(){"undefined"==typeof home?setTimeout(t,100):home.logic.loadDom()}e.preventDefault(),tmplates.appendScript({class:"homejs",src:"/public/"+(SERVER?"js":"Js")+"/ss-home.js",opt:"js"}),t()}},limitHistoryText:280};setTimeout(function(){varStrik.clearLogs()},1e3);var visorObj={events:function(){si(".visorImg .newComment textarea, textarea.textarea",function(e){e.addEventListener("focus",visorObj.logic.removeKeyWindow,!1)}),si(".visorImg .newComment textarea, textarea.textarea",function(e){e.addEventListener("blur",visorObj.logic.addKeyWindow,!1)}),window.addEventListener("keyup",visorObj.logic.changeImageKey,!1)},logic:{removeKeyWindow:function(){window.removeEventListener("keyup",visorObj.logic.changeImageKey,!1)},addKeyWindow:function(){window.addEventListener("keyup",visorObj.logic.changeImageKey,!1)},changeImageKey:function(t){39===t.which?$(".visorImg>.-visor-img .imgEnd>.r-right").trigger("click"):37===t.which&&$(".visorImg>.-visor-img .imgEnd>.r-left").trigger("click")}}};function selectImageSendChat(e,t){var i=new FileReader;i.onload=function(){var a=i.result;t(a)},i.readAsDataURL(e)}function timeDate(){var e=new Date;return[e.toLocaleTimeString(),e.toLocaleDateString(),e.toISOString()+"",e]}(function(e){var t=String.fromCharCode;e.fn.searchNick=function(a){varStrik.vari.Srachnick="",varStrik.vari.banderaNick=!1;var i=e(this).parent();varStrik.vari.textBosSrachNick=e(this),e(this).on({keypress:function(s){var e=s.which,r=0,o=s.keyCode,n=t(e).toLowerCase();n==a&&(varStrik.vari.banderaNick=!0,r=0,!se(".showNickuserInfo")&&i.append("<div class=\"showNickuserInfo\"></div>")),varStrik.vari.banderaNick&&(varStrik.vari.Srachnick+=n),32===e&&varStrik.cancelSearchNick(),3<varStrik.vari.Srachnick.length&&(clearTimeout(varStrik.vari.searchNickText),varStrik.vari.searchNickText=setTimeout(function(){chatHist.emit("searching",{val:varStrik.vari.Srachnick.substr(1)},varStrik.showResultUsers.bind({posi:r}))},500))}})},e.fn.faber=function(a){e(this).on({keypress:function(i){var e=i.which,s=i.keyCode,r=t(e).toLowerCase();(-1==a.indexOf(r)&&9!=s&&(37==e||37!=s)&&(39!=s||39==e)&&8!=s&&(46!=s||46==e)||161==e)&&i.preventDefault()}})}})(jQuery);function aleatorio(e,t){var a=Math.random()*(t-e);return a=Math.round(a),parseInt(e)+a}function showVI(){var e=700>$(document).width()?98*$(document).width()/100:75*$(document).width()/100;visorPhoto(this.dataset.seru,e,this.dataset.alto,this.dataset.ancho,this.dataset.book,$(this),this.dataset.media)}function visorPhoto(e,t,a,i,s,r,o){function n(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var d=document.documentElement;$("body").append("<article class=\"ss-dummi ng-scope\" style=\"z-index: 6;\"></article>"),$("body").append("<section class=\"visorImg\"></section>"),se(".visorImg").innerHTML=html.domVisotImg;var c=$(".visorImg .newComment textarea").atwho(varStrik.settingTagging).atwho(varStrik.settingEmojis);c.caret("pos",47),c.focus().atwho("run"),varStrik.vari.uri=window.location.href,se("body").style.overflow="hidden",boot.logic.responsive({width:!0})&&function(){d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullScreen?d.webkitRequestFullScreen():d.msRequestFullscreen&&d.msRequestFullscreen()}(),si(".visorImg>.-visor-img, .visorImg>i",function(e){e.addEventListener("click",function(e){if(e.target.className.match(/(cancelButton|-visor-img|sdgr)/)){boot.logic.responsive({width:!0})&&n(),window.removeEventListener("keyup",visorObj.logic.changeImageKey,!1);try{var t=JSON.parse(se(".visorImg").dataset.infos)}catch(e){}tmplates.data.dass=t;var a=se(".visorImg").dataset.page;history.pushState(t,"","visit"===a?"/"+t.nick:"home"===a?"/":varStrik.vari.uri),se("body").style.overflow="auto",si(".visorImg, .ss-dummi",function(e){e.remove()})}},!1)}),chatHist.emit("Visor",{Book:s,Entertain:o,lmt1:0,lmt2:20},function(e){e?(putImgAndComent({nombre:e.img.nombre,width:i,heigth:a,cod:o.substr(4),Lcod:s.substr(2)}),varStrik.vari.imgs=e.imgs,varStrik.vari.visorKey=e.key,si(".visorImg>.-visor-img .optFile>span",function(t){t.dataset.file="Pic_"+e.img.cod}),se(".visorImg .newComment form").addEventListener("submit",NewResponce,!1),si(".visorImg>.-visor-img .imgEnd>span",function(e){e.addEventListener("click",rowStep,!1)}),visorObj.events()):(se("body").style.overflow="auto",si(".visorImg, .ss-dummi",function(e){e.remove()}))})}function rowStep(){var e=this;if("left"===e.dataset.dir){if(varStrik.vari.visorKey+1!==varStrik.vari.imgs.length)varStrik.vari.visorKey+=1,putImgAndComent(varStrik.vari.imgs[varStrik.vari.visorKey]);else{var t=varStrik.vari.imgs[varStrik.vari.visorKey];chatHist.emit("loadImgRow",{cod:t.cod,book:t.Lcod,dir:!1},function(e){e.length&&(varStrik.vari.visorKey+=1,varStrik.vari.imgs=varStrik.vari.imgs.concat(e.reverse()),putImgAndComent(varStrik.vari.imgs[varStrik.vari.visorKey]))})}}else if(0<varStrik.vari.visorKey)varStrik.vari.visorKey-=1,putImgAndComent(varStrik.vari.imgs[varStrik.vari.visorKey]);else{var t=varStrik.vari.imgs[varStrik.vari.visorKey];chatHist.emit("loadImgRow",{cod:t.cod,book:t.Lcod,dir:!0},function(e){e.length&&(varStrik.vari.visorKey=e.length-1,varStrik.vari.imgs=e.reverse().concat(varStrik.vari.imgs),putImgAndComent(varStrik.vari.imgs[varStrik.vari.visorKey]))})}}function NewResponce(t){t.preventDefault();var e=se(".visorImg .newComment form"),a=se(".visorImg .newComment textarea"),i=a.value;noSpace(i)&&""!==i?(a.dataset&&notifi.emit("replyPlayer",{data:e.dataset,message:i},function(t){"1"===e.dataset.opt&&(se(".visorImg .-comnet-reply").dataset.histo=t.node),respDom(t)}),this.reset()):errorMsg("T\xFA historia no puede estar vacia!!",1,3e3)}function loadDomVisor(e,t){se(".visorImg .-comnet-reply").innerHTML="",localStorage.nick?chatHist.emit("LoadHistVisor",e,function(e){e.infoHisto?(se(".visorImg .newComment form").dataset.cod=e.infoHisto.Hcod,se(".visorImg .newComment form").dataset.opt=0,splitStringMsg(e.infoHisto.historia,emoticonsDecode,{codec:!0}).then(function(t){se(".visorImg .-comment-head").innerHTML="<div style=\"background-image:url("+e.infoHisto.dir+");\" class=\"img\"></div> "+(t||"")}),se(".visorImg .-comnet-reply").dataset.histo="fases"+e.infoHisto.Hcod,e.parte2&&respDom(e.parte2)):(se(".visorImg .newComment form").dataset.cod="Pic_"+e.infoFile.file_info,se(".visorImg .newComment form").dataset.opt=1,se(".visorImg .-comment-head").innerHTML="<div style=\"background-image:url("+e.infoFile.dir+");\" class=\"img\"></div>"),se(".visorImg>.-visor-img .optFile>span[data-opt=\"0\"]").innerHTML="Me gusta "+e.FileCant,se(".visorImg>.-visor-img .optFile>span[data-opt=\"1\"]").innerHTML="No me gusta "+e.FileNCant,si(".visorImg>.-visor-img .optFile>span",function(e){e.addEventListener("click",gngVisor,!1)})}):t(!1)}function putImgAndComent(e){function t(){if(se(".sdgr>.imgEnd")){var e=JSON.parse(se(".sdgr>.imgEnd").dataset.img),t=98*se(".ss-dummi").offsetHeight/100,a=se(".ss-dummi").offsetHeight;t=700<t?a-80:t;var i=size(e.heigth,e.width,se(".visorImg>.-visor-img").offsetWidth,t);se(".visorImg>.-visor-img .imgEnd").style.backgroundImage="url("+e.nombre+")",se(".visorImg>.-visor-img .imgEnd").style.width=i[0]+"px",se(".visorImg>.-visor-img .imgEnd").style.height=i[1]-5+"px"}}se(".sdgr>.imgEnd").dataset.img=JSON.stringify(e),!se(".visorImg").dataset.page&&tmplates.data.dass&&(varStrik.vari.page=!0,se(".visorImg").dataset.page=tmplates.data.dass.page,se(".visorImg").dataset.infos=JSON.stringify(tmplates.data.dass)),varStrik.data.resizing||(varStrik.data.resizing=!0,window.addEventListener("resize",function(){clearTimeout(varStrik.data.resizeVisorImg),varStrik.data.resizeVisorImg=setTimeout(t,500)},!1)),t(),tmplates.data.dass&&(tmplates.data.dass.page="visor",tmplates.data.dass.content=se(".visorImg").innerHTML,history.pushState(tmplates.data.dass,"im\xE1gen","/media/Pic_"+e.cod+"ML"+e.Lcod)),loadDomVisor({file_info:"Pic_"+e.cod},function(){visorObj.events()})}function imgDimention(e,t){var a=new Image;a.src=e,a.onload=function(){t(this)},a.onerror=function(){t(!1)}}function loadImage(e,t){selectImageSendChat(e,function(a){imgData.imgDataUrl=a,imgData.name=e.name,imgData.type=e.type,imgData.size=e.size,imgDimention(a,function(e){t(e)})})}function secontTime(e){var t=parseInt(e/3600),a=parseInt(e/60),i=e%60;if(10>a&&(a="0"+a),10>i&&(i="0"+i),0===t)return 100>a?a+":"+i:10>t?"0"+t+":"+a+":"+i:t+":"+a+":"+i}function imgUrlShow(e){e.preventDefault(),visorPhoto(this.dataset.uss,76*$(document).width()/100,this.dataset.otla,this.dataset.ohcna,this.dataset.boob,$(this),this.dataset.codito)}function noSpace(e){return 0!==e.trim().length}function size(e,t,i,s){var r,o,n,d,c,l;return e>s?(r=96*s/100,o=e-r,n=100*o/e,d=t*(100-n)/100,d>95*i/100&&(d=95*i/100,c=t-d,n=100*c/t,r=e*(100-n)/100)):t>i?(d=95*i/100,c=t-d,n=100*c/t,r=e*(100-n)/100):110*e/100<s?(r=87*s/100,o=r-e,n=100*o/e,r=e*(100+n)/100,d=t*(100+n)/100,d>87*i/100&&(d=87*i/100,c=d-t,n=100*c/t,r=e*(100+n)/100)):e<s||81*e/100<s||t<80*i/100||81*t/100<80*i/100?(d=t,r=e):110*t/100<i&&(d=t,r=e),l=[d,r,i,s]}function ajaxSocket(e,t){return new Promise(function(a){function i(){if(!varStrik.data.breakAjaxSocket){var r=parseInt(100*s/t.end);t.prgFn(r);var o=varStrik.splitWords(t.file,7e3);if(t.file=o[1],0===s){var n=o[0].indexOf("base64");o[0]=o[0].substr(n+7)}s<=t.end&&chatHist.emit(e,{fileName:t.fileName,nm:s,nick:localStorage.nick,user:localStorage.user,stream:o[0],lmt:t.end},function(e){e.err?boot.logic.popUpAlert({err:!0,msg:"Algo salio mal \uD83D\uDE1E, intentalo mas tarde"}):e.finish?e.finish?(s=0,a(e)):boot.logic.popUpAlert({err:!0,msg:"Algo salio mal \uD83D\uDE23, intentalo mas tarde"}):(s++,i())})}else varStrik.data.breakAjaxSocket=!1,a({err:!0,msg:"sending canceled",type:"canceled"})}var s=0;if(t.end===void 0){var r=t.file.length;t.end=parseInt(r/7e3)}i()})}function intervalo(e){var t=se(e);null!==t&&(-1<num?(t.innerHTML=num,num-=1,window.setTimeout("intervalo('"+e+"');",1e3)):num=0)}function encriptado(){var e,t=Math.floor(10*Math.random()+1);return 1===t?e="sed47s__iIIMssmkd58d":2===t?e="loo9sd987515_5888-78":3===t?e="gvbsdrt6g46ser":4===t?e="eo_sdr_degr_887498_sljkb":5===t?e="osand_k_21ddi_54892_dsbs":6===t?e="4816xdfbs6d7fb67d6bd":7===t?e="546840sdgr6k6etyk068":8===t?e="6846reg4d6rth4d6h_@":9===t?e="2394646dtgre":10===t?e="3587484ds6a46toy":void 0,e}function browsers(){var e=navigator.userAgent;return-1<e.indexOf("Chrome")?"Google Chrome":-1<e.indexOf("Firefox")?"Firefox":"T\xFA explorador"}function alertPop(e,t){function a(){varStrik.alertPop&&clearTimeout(varStrik.alertPop),varStrik.alertPop=setTimeout(function(){$("body>article#alertPop").fadeOut(500,function(){$("body>article#alertPop").remove()})},e.time||300)}null!==se("body>article#alertPop")&&$("body>article#alertPop").remove();var i=se("body"),s=document.createElement("article");s.innerHTML=e.msg,i.appendChild(s),s.id="alertPop",e.err?s.classList.add("icon-warning"):s.classList.add("icon-ok-circled"),0===e.opt?(s.innerHTML+="<div><span data-res=\"1\" class=\"icon-thumbs-up-4\">Aceptar</span><span data-res=\"0\" class=\"icon-thumbs-down-3\">Cancelar</span></div>",si("article#alertPop span[data-res]",function(e){e.addEventListener("click",function(){t&&t(!("1"!==this.dataset.res)),a()},!1)})):setTimeout(function(){a()},50)}function errorMsg2(e,t,a){null!==se("body > article#ntfs")&&$("body > article#ntfs").remove();var i=se("body"),s=document.createElement("article");i.appendChild(s),s.id="ntfs",s.innerHTML=e+"<br><span data-opt=\"true\">Aceptar</span><span data-opt=\"false\">Cancelar</span>",1===t?s.classList.add("errores"):2==t&&s.classList.add("notification"),si("body > article#ntfs>span",function(e){e.addEventListener("click",function(){var e=this.dataset.opt;"true"===e?a(!0):a(!1),$("body > article#ntfs").remove()},!1)})}function chBgChat(){se(".chat article[data-chopt=\"true\"]>.ss-close-icon").addEventListener("click",function(){$("article>article[data-chopt]").remove(),$(".chat>article>article.contenOptions").css({display:"block"})},!1),si("span[data-chat]",function(e){e.addEventListener("mouseenter",function(){se("link#cssChat").href="/public/"+(SERVER?"css":"styles")+"/"+this.dataset.chat+".css"},!1),e.addEventListener("click",function(){chatHist.emit("design",{opt:2,me:localStorage,val:this.dataset.chat},function(e){e&&boot.logic.popUpAlert({msg:"El color del chat se ha cambiado correctamente \uD83D\uDE0F",time:3e3}),$("article>article[data-chopt]").remove(),$(".chat>article>article.contenOptions").css({display:"block"})})},!1)})}function errorMsg(e,t,a){null!==se("body > article#ntfs")&&$("body > article#ntfs").remove();var i=se("body"),s=document.createElement("article");i.appendChild(s),s.id="ntfs",s.innerHTML=e,1===t?s.classList.add("errores"):2==t&&s.classList.add("notification"),setTimeout(function(){$("body > article#ntfs").fadeOut(500,function(){$("body > article#ntfs").remove()})},a)}function waitLoad(e){var t=se("body"),a=document.createElement("span");t.appendChild(a);var i=se("body > span");i.innerHTML=e,a.classList.add("waitLoad")}function Multimedia(){if("none"!==$(".subody_2").css("display")){se(".allMedia").innerHTML="Multimedia \u25BC";$(".subody_2").fadeOut(500),$(".subody").append("<section id=\"Media\"></section>"),se("#Media").innerHTML="<section><span data-ytpe=\"video\">V\xEDdeos</span><span data-ytpe=\"music\">M\xFAsica</span><span data-ytpe=\"listPlayer\">Listas</span><span data-ytpe=\"all\">Todo!!</span></section><article></article>",chatHist.emit("allMedia",{me:se("#design").dataset.tag,media:"video"},function(e){addVideo(e.htm)}),si("#Media > section:nth-child(1) > span[data-ytpe]",function(e){e.addEventListener("click",music,!1)})}else $(".subody_2").fadeIn(500),se(".allMedia").innerHTML="Multimedia \u25BA",numMedia=0,$("#Media").remove()}var numMedia=0;function music(){chatHist.emit("allMedia",{me:se("#design").dataset.tag,media:this.dataset.ytpe,lmt:numMedia},function(e){switch(e.type){case 1:numMedia=0,addVideo(e.htm,function(){});break;case 2:addSongs(e.htm,function(){});break;case 3:addListP(e);}})}function addListP(e){numMedia=0,si("#Media > section:nth-child(1) > span",function(e){e.dataset.chg=""}),se("#Media > section:nth-child(1) > span[data-ytpe=\"listPlayer\"]").dataset.chg=!0,null===se("#Media>article>article#lp")&&(se("#Media>article").innerHTML="<article id=\"lp\"></article>"),se("#Media>article>article#lp").innerHTML="",e.dts.forEach(function(e){$("#Media>article>article#lp").append("<div data-name=\"4562"+e.cod+"\">"+e.name+"<span>"+e.cantidad+" Canciones</span></div>")}),si("article#lp>div",function(e){e.addEventListener("click",showSongLp,!1)})}function showSongLp(){numMedia=0;var e=this.dataset;chatHist.emit("songs",{lp:e.name,opt:0,lmt:0},function(t){si("article#lp>div[data-name]",function(e){e.style.display="none"}),null===se("article#lp>article[data-type=\"title\"]>div")&&$("article#lp").append("<article data-type=\"title\"><div>Nombre</div><div>Artista</div><div>Genero</div><div>Duraci\xF3n</div><div>Opc</div></article>"),t.sg.forEach(function(t){var a="<article data-type=\"sg\" data-lp=\""+e.name.substr(4)+"\" data-sg=\"3452"+t.cod+"\"><div>";a+=1===t.typeMedia?"\u266B ":"\u25BA ",a+=t.name+"</div><div>"+t.Artist+"</div><div>"+t.genre+"</div><div>"+secontTime(t.duration)+"</div><div title=\"opciones\">\u25BC</div></article>",$("article#lp").append(a)}),si("article#lp>article[data-type=\"sg\"]",function(e){e.addEventListener("contextmenu",addListPlayer,!1)}),si("article#lp>article[data-type=\"sg\"]",function(e){e.addEventListener("click",showMsc,!1)})})}function addSongs(e){numMedia+=40,si("#Media > section:nth-child(1) > span",function(e){e.dataset.chg=""}),se("#Media > section:nth-child(1) > span[data-ytpe=\"music\"]").dataset.chg=!0,0<e.length?(null===se("#Media>article>table#music")&&(se("#Media>article").innerHTML="<table id=\"music\"><tbody><tr class=\"headerT\"><td>Tit\xFAlo</td><td>Artista</td><td>Genero</td><td>Duraci\xF3n</td></tr></tbody></table>"),e.forEach(function(e){$("#Media>article>table > tbody").append("<tr data-sg=\""+e[3]+"\" data-lp=\""+e[6]+"\" data-nick=\""+e[4]+"\"><td>"+e[0]+"</td><td>"+e[5]+"</td><td>"+e[1]+"</td><td>"+e[2]+"</td></tr>")}),si("#Media > article > table>tbody>tr",function(e){e.addEventListener("contextmenu",addListPlayer,!1)}),si("#Media > article > table>tbody>tr",function(e){e.addEventListener("click",showMsc,!1)}),20>e.length?(numMedia=0,$("span.moreM").remove()):(null===se("span.moreM")&&$("#Media>article").append("<span class=\"moreM\" data-ytpe=\"music\">Mas m\xFAsica \u25BC</span>"),se("span.moreM").addEventListener("click",music,!1))):se("#Media>article").innerHTML="<section id=\"error\"><p>Lo sentimos pero no tienes ningun Audio</p></section>"}function addListPlayer(t){t.preventDefault();var e=this.dataset;$("ul#menuListPlayer").remove();var a=document.createElement("ul");a.id="menuListPlayer",a.style.top=t.pageY-10+"px",a.style.left=t.pageX+10+"px",se("body").insertBefore(a,se("body").childNodes[0]),[{desc:"Agregar \u25BA",opt:"lists"},{desc:"Quitar de la lista",opt:"delete"}].forEach(function(e){var t=document.createElement("li");t.textContent=e.desc,t.dataset.opt=e.opt,a.insertBefore(t,a.childNodes[0])}),se("ul#menuListPlayer>li[data-opt=\"lists\"]").addEventListener("mouseleave",function(){$("ul#menuListPlayer>li>ul").remove()}),se("ul#menuListPlayer>li[data-opt=\"delete\"]").addEventListener("click",function(){chatHist.emit("allListplayer",{uss:localStorage.user,opt:2,sg:e.sg,lp:e.lp},function(t){t?(errorMsg("Se ha removido la canci\xF3n de la lista",2,1e3),$("#Media > article:nth-child(2) > table>tbody>tr[data-sg=\""+e.sg+"\"]").remove()):errorMsg("Lo sentimos, esta lista de reproducci\xF3n no es tuya!!",1,2e3)})},!1),se("ul#menuListPlayer>li[data-opt=\"lists\"]").addEventListener("mouseenter",function(){$("ul#menuListPlayer>li>ul").remove();var t=this,a=document.createElement("ul");t.insertBefore(a,t.childNodes[0]),chatHist.emit("allListplayer",{uss:localStorage.user,opt:0},function(t){if(1===t){var i=document.createElement("li");i.textContent="tienes que estar registrado!!",a.insertBefore(i,a.childNodes[0])}else t.push({name:"Crear lista",cod:"create"}),t.reverse().forEach(function(t){var i=document.createElement("li");i.dataset.lpCod=t.cod,i.dataset.sg=e.sg,i.textContent=t.name,a.insertBefore(i,a.childNodes[0])}),si("ul#menuListPlayer>li>ul>li",function(e){e.addEventListener("click",addSongListplayer,!1)})})}),se("html").addEventListener("click",function(){$("ul#menuListPlayer").remove()})}function addVideo(e){si("#Media > section:nth-child(1) > span",function(e){e.dataset.chg=""}),se("#Media > section:nth-child(1) > span[data-ytpe=\"video\"]").dataset.chg=!0,0<e.length?($("#Media>article > *").remove(),e.forEach(function(e){$("#Media>article").append(e)}),si("#Media > article:nth-child(2) > div[data-media=\"video\"]>div",function(e){e.addEventListener("click",loadVisorV,!1)})):se("#Media>article").innerHTML="<section id=\"error\"><p>Lo sentimos pero no tienes ningun v\xEDdeo</p></section>"}function createList(t){t.preventDefault();var e=this,a=$(this).serialize();chatHist.emit("createList",{sg:this.dataset.sg,name:se("article.newList>form>input[type=\"text\"]").value,user:localStorage.user},function(t){1===t?errorMsg("Tu lista de reproducci\xF3n se ha creado correctamente y la canci\xF3n se ha agregado a esa lista :D",2,6e3):2===t?errorMsg("La lista de reproducci\xF3n ya existe!!",1,3e3):3==t&&errorMsg("Que intentas hacer???",1,3e3),e.reset(),$("div.Viewer").fadeOut(500),setTimeout(function(){se("div.Viewer").innerHTML=""},500)})}function addSongListplayer(){var e=this.dataset;if(!("create"===e.lpCod))chatHist.emit("allListplayer",{opt:1,uss:localStorage.user,lp:e.lpCod,sg:e.sg},function(e){1===e?errorMsg("Para poder hacer esta acci\xF3n tienes que estar registrado!",2,1e3):e&&errorMsg("Se ha agregado correctamente",2,1e3)});else if(null===se("div.Viewer"))errorMsg("Para crear una lista nueva tienes que estar en la ventana principal <a target=\"_blank\" href=\"/../\">dale click ac\xE1</a>",2,5e3);else{var t="<article class=\"newList\"><form data-sg=\""+e.sg+"\"><h4>Nueva lista de reproducci\xF3n</h4><input type=\"text\" placeholder=\"Escribe el nombre de la lista\" required/><input type=\"submit\" value=\"Guardar\"/></form></article>";$("div.Viewer").fadeIn(800),se("div.Viewer").innerHTML=t,se("article.newList>form").addEventListener("submit",createList,!1)}}function loadVisorV(){visorVideo(this.dataset.us||"null",this.dataset.file||"vid_"+this.dataset.cod,0)}function cerrar(){$(".before").animate({height:"1000px",width:"1000px",opacity:0},300,function(){$(".before").remove()})}function playPreviw(){null!==se(".before > section > div[data-opt=\"fplayy\"]")&&(se(".before > section > div[data-opt=\"fplayy\"]").dataset.opt="pause",listening({id:this.dataset.file,nick:this.dataset.nick}))}function before(){function e(e){respDom(e)}$("#PhotoPreview, #PhotoPreview2").click(function(){visorPhoto($(this).data("seru"),76*$(document).width()/100,$(this).data("altitis"),$(this).data("anchitis"),$(this).data("boob"),$(this),$(this).data("codito"))}),se(".before > section > div[data-opt=\"fplayy\"]")&&se(".before > section > div[data-opt=\"fplayy\"]").addEventListener("click",playPreviw,!1),$("#abecera > span").on("click",function(e){var t={hist:$(this).attr("class"),us:localStorage.user,type:1};notifi.emit("GNG",t,function(t){1===t.type?$(e.target).html("Me Gusta "+t.cant):2===t.type?$(e.target).html("No Me Gusta "+t.cant):45===t.type&&t.histo.forEach(function(e){$(".POST"+e).slideUp(500,function(){$(this).remove(),$(".fases"+e+"rgab").remove()})})})}),null!==se(".abc")&&($(".abc").searchSong("&"),$(".abc").serchNick("@")),se("#responces_Form").addEventListener("submit",function(t){t.preventDefault();var i=se(".abc"),a=i.value;i.value="",noSpace(a)&&(i.dataset.message===void 0?notifi.emit("responceNew",{cod:i.dataset.file,message:a,opt:0},function(t){e(t,i.dataset.file)}):notifi.emit("responceNew",{cod:i.dataset.message,message:a,opt:1},respDom))},!1)}function reproIntra(){"fplayy"===this.dataset.opt?(this.dataset.opt="pause",soundNoti(this.dataset.src)):(this.dataset.opt="fplayy",soundNoti("...sds"))}function appendJ(e,t,a,i){var s=document.createElement(e);se(t).insertBefore(s,a),i(s)}function gngVisor(){var e="<h3>Compartir im\xE1gen</h3><form data-fileShare=\""+this.dataset.file+"\"><textarea class=\"sharetext\" placeholder=\"Escribe t\xFA historia!!\"></textarea><button type=\"submit\" class=\"icon-share-2 ss-button-primary\">Publicar</button><span class=\"icon-cancel ss-button-cancel\">Cancelar</span></form>",t=this.dataset.opsti,a=this.dataset.file;if(this.dataset.opsti="","share"===t){var i=document.createElement("section");se(".visorImg>.-visor-img").insertBefore(i,se(".FinalImage")),i.id="shareDom",i.innerHTML=e,se("#shareDom>form").addEventListener("submit",sharePic,!1),se("#shareDom .icon-cancel").addEventListener("click",function(){se("#shareDom").className="animated zoomOutUp",setTimeout(function(){se("#shareDom").remove()},1e3)},!1)}else notifi.emit("FileOpti",{opstion:t,userPhoto:userGlobal,file:a,user:localStorage},function(e){e?(si(".visorImg .optFile>span[data-opt=\"0\"]",function(t){t.textContent="Me gusta "+e.like}),si(".visorImg .optFile>span[data-opt=\"1\"]",function(t){t.textContent="No me gusta "+e.nolike}),si(".visorImg .optFile>span",function(e){e.addEventListener("click",gngVisor,!1)})):acceder(!1)})}function sharePic(t){t.preventDefault();var e=this.dataset.fileshare;se("#shareDom .icon-share-2").remove(),$("#shareDom form").append("<span class=\"loadsIcon\"><i class=\"animate-spin demo-iconed-load\"></i>Publicando...</span>"),chatHist.emit("difucion",{file:e,meet:localStorage},function(t){showHistory({arreglo:t,file:e,user:localStorage.user,history:se("#shareDom .sharetext").value,NoSee:""}).then(function(){se("#shareDom").className="animated zoomOutUp",setTimeout(function(){se("#shareDom").remove()},1e3)}).catch(function(){})})}function notifyMe(e){"Notification"in window&&("denied"===Notification.permission||Notification.requestPermission(function(t){"granted"===t&&(varStrik.vari.noty&&varStrik.vari.noty.close(),varStrik.vari.noty=new Notification("FOT\xD3GENA",e),varStrik.vari.noty.vibrate,varStrik.vari.noty.onclick=function(){varStrik.vari.noty.close(),window.focus()},clearTimeout(varStrik.vari.closeNoty),varStrik.vari.closeNoty=setTimeout(function(){varStrik.vari.noty.close()},6e3))}))}function initRemoveElement(e){if(e){e.classList.add("hideanim"),e.addEventListener("animationend",removeElement),e.addEventListener("webkitAnimationEnd",removeElement);var t=e.nextSibling;t.classList.add("hideanim-next"),t.style.marginTop="-"+e.offsetHeight+"px"}}function removeElement(t){var e=t.target,a=t.target.nextSibling;a.classList.remove("hideanim-next"),a.style.margin="4px auto",e.remove()}function deleteRespues(e){e.histo?e.histo.forEach(function(t){initRemoveElement(se(".POST"+t)),$(".fases"+t+"rgab").remove()}):($(".fases"+e.cod+">strong").html(e.cant||""),$("[data-resp=\"fases"+e.cod+"\"]>strong").html(e.cant||""),$(".contentResponse > article[data-info=\""+e.Rcod+"\"]").slideUp(500,function(){$(this).remove()}),$(".response > section[data-info=\""+e.Rcod+"\"], .preview-replies>[data-info=\""+e.Rcod+"\"]").slideUp(500,function(){$(this).remove()}))}function respDom(e){e.node&&(se("#request>."+e.node+">strong")&&(se("#request>."+e.node+">strong").innerHTML=e.cant||""),se("span[data-resp=\""+e.node+"\"]>strong")&&(se("span[data-resp=\""+e.node+"\"]>strong").innerHTML=e.cant||""),si(".previewFile[data-src]",function(e){e.addEventListener("click",reproIntra,!1)}),e.html.forEach(function(t){splitStringMsg(t.respta,emoticonsDecode,{codec:!0}).then(function(a){t.respta=a,se(".popUpPreview .preview-replies[data-history=\""+e.node+"\"] section[data-info=\"5844"+t.Rcod+"\"]")||$(".popUpPreview .preview-replies[data-history=\""+e.node+"\"]").append(html.respince(t)),se("."+e.node+"rgab>.response")&&!se("."+e.node+"rgab>.response section[data-info=\"5844"+t.Rcod+"\"]")&&$("."+e.node+"rgab>.response").append(html.respince(t)),se(".visorImg .-comnet-reply[data-histo=\""+e.node+"\"] section[data-info=\"5844"+t.Rcod+"\"]")||$(".visorImg .-comnet-reply[data-histo=\""+e.node+"\"]").append(html.respince(t,!0))})}),$(".contentResponse").animate({scrollTop:$("article[data-info]").height()*$("article[data-info]").length},800),$(".responces").animate({scrollTop:$(".responces").height()},800),$("section.contentResponse").animate({scrollTop:$("section.contentResponse").height()},800),si("a#imgUrl",function(e){e.addEventListener("click",imgUrlShow,!1)}),si(".previewFile[data-src]",function(e){e.addEventListener("click",reproIntra,!1)}))}function recargar(e){$(e+" div:first-child").load()}function ajax(e,t){$.ajax({url:e,type:"POST",data:t})}function visor(){$("#visor_View").fadeIn(500)}function upload(){$(".Compl_comment > div:first-child").fadeIn(400),$(".Compl_comment > div:last-child").fadeIn(350,function(){$(".clean").keyup(function(){var e=-1*$(this).val().length+279;0>e?$("#NewHistory > input").fadeOut(500):$("#NewHistory > input").fadeIn(500),$(".Compl_comment > div:last-child").html(e)})})}function show(e,t){1==e%2?$(t).fadeIn(300):$(t).fadeOut(300)}function formularios(){$(".delebook > span:nth-child(2)").on("click",function(){notifi.emit("deletePhoto",{borrar:se(".Photoo>h3>span").dataset.cod,meet:localStorage,opt:1},function(e){e&&($(".delebook").fadeOut(800),se(".Photoo>h3>span[data-name]").textContent="Libro Borrado!!",$("#contenephot *").each(function(){$(this).hide(500)}),setTimeout(function(){se("#contenephot").innerHTML="",mierda=0},500))})}),$("#permision > form").on("submit",function(t){t.preventDefault();var e=$(this),a=se("#permision > form>input[type=hidden]").value,i=se(".Photoo>h3>span").dataset.cod,s=se("#permision > form > article>input[type=radio]:checked").value;chatHist.emit("chanePermissBook",{b:a,prm:s,bis:i},function(t){t&&($("#permision").fadeOut(800),e[0].reset(),errorMsg("Se ha cambiado con \xE9xito los permisos del libro!",2,3e3))})}),$("#fm_delete").on("submit",function(t){t.preventDefault();var e=[],i=[];$(".Photoo>article>div>input[type=checkbox]:checked").each(function(){e.push($(this).val()),i.push($(this)),e.length===$(".Photoo>article>div>input[type=checkbox]:checked").length&&notifi.emit("deletePhoto",{borrar:e,meet:localStorage,opt:0},function(e){e&&i.forEach(function(e){e.fadeOut(500),e.parent().hide(500),setTimeout(function(){e.parent().remove()},500)})})}),$("#fm_delete").fadeOut(500),si(".Photoo>article>div>input",function(e){e.dataset.d=1})})}function agregar_foto(){var e=se("#addphotoshop > article > article > article > form");null!==e&&e.addEventListener("submit",function(e){e.preventDefault(),subirFotos(se("#addphotoshop > article > article > article > form > span > input"),2)})}function infoBokk(){var e=porcentajes(1);0==e%2?($("<div class=\"infobox\">La opci\xF3n de edici\xF3n es para darle permiso a otras personas para que agreguen fotos a este libro mas adelante</div>").prependTo("#abracadabra > i"),setTimeout(function(){$(".infobox").remove(),porcentajes(1)},5e3)):$(".infobox").remove()}function subir_fotos(){$("#abracadabra > i").on("click",infoBokk);var e=se("#book > article > form");null!==e&&e.addEventListener("submit",function(e){e.preventDefault();var t={edition:$("#abracadabra > select").val(),bokk:$("#book > article > form > input[type=text]").val(),permiss:$("#book > article > form > article > article > input[type=radio]:checked").val(),me:localStorage};sessionStorage.bkn=se("#book > article > form > input[type=text]").value,notifi.emit("CreateBook",t,function(e){1===e.vali?alert("el libro ya existe"):subirFotos(se("#book > article > form >span > input[type=file]"),1,e.bokk)})})}function subirFotos(e,t,a){$("#book > article > form > input").fadeOut(500),errorMsg("Las \xEDmagenes se estan subiendo",2,6e3);for(var s,r=0,o=e.files.length;r<o;r++)s=e.files[r],!s.type.match(/image.*/)||(Ajaxs.push({file:s}),r===o-1&&(1===t?(NoAjaxs[0]=se("#book>article>form>article>article>input[type=\"radio\"]:checked").value,NoAjaxs[1]=a,$("#abracadabra")[0].reset()):2==t&&$("#addphotoshop > article > article > article > form")[0].reset()));continuar()}function continuar(){if(window.FormData)var e=new FormData;if(0<Ajaxs.length){var t=Ajaxs.shift(),i=t.file;20661<i.size?(dato={name:i.name,size:i.size,nick:localStorage.nick},chatHist.emit("ifSize",dato,function(t){4===t?(NoAjaxs.push({file:i,motivo:"muy peque\xF1a"}),continuar()):2===t?(NoAjaxs.push({file:i,motivo:"ya existe"}),continuar()):(reader=new FileReader,reader.onloadend=function(){return function(t){$("#addphotoshop > article > article > article > form, #book > article > form").css({background:"url("+t.target.result+") no-repeat scroll -50px 0/115% rgba(0, 0, 0, 0.8)"})}}(i),reader.readAsDataURL(i),e&&(e.append("fl_addbook",i),e.append("table",sessionStorage.bkn),e.append("nick",localStorage.nick),envio4(e)))})):(NoAjaxs.push({file:i,motivo:"muy peque\xF1a"}),continuar())}else window.opener.document.querySelector("title").innerHTML="Todos los archivos subidos",notifi.emit("CreateBook",{book:NoAjaxs[1],nick:localStorage.nick,date:timeDate()[2]},function(e){var t=window.opener.document.querySelector(".subody_2");$(t).prepend(e.dom),$(".POST"+e.histo).css({display:"none"}),$(".POST"+e.histo).slideDown(500)}),window.opener.errorMsg("Se han terminado de subir las \xEDmagenes",2,5e3),$("#sound").html("<audio autoplay><source src=\"./public/sounds/2315.wav\" type=\"audio/ogg\">Your browser does not support the audio element.</audio>"),0===NoAjaxs.length?$(".infoUpload, .infoUpload").html("<div>Fin de la Carga :D</div><div>"+NoAjaxs.length+" archivos con error!!</div>"):$(".infoUpload, .infoUpload").html("<div>Fin de la Carga :D</div><div>"+(NoAjaxs.length-2)+" archivos con error!!</div>"),setTimeout(function(){},3e3)}function prigress(e){var t=$("#progresito > div"),i=window.opener.document.querySelector("title");t.html(e+"%"),t.css({width:e+"%"});var s=porcentajes(0);i.innerHTML=s+" archivos subidos"}var oReq=new XMLHttpRequest;function ajaxHttpRequest(e,t,a){oReq.upload.addEventListener("progress",t,!1),oReq.open("POST","/upImages",!0),oReq.onreadystatechange=function(){4===this.readyState&&a(this.responseText)},oReq.send(e)}function envio4(e){oReq=new XMLHttpRequest;var t=0;oReq.upload.addEventListener("progress",function(t){var e=parseInt(Math.round(100*(t.loaded/t.total)));prigress(e)},!1),oReq.open("POST","/upImages",!0),oReq.onreadystatechange=function(){4===this.readyState&&(t=porcentajes(1),$(".infoUpload,  .infoUpload").slideDown(500).css({display:"block"}).html(t+" archivos subidos"),continuar())},oReq.send(e)}var porcentajes=function(e){return function(t){return e+=t,e}}(0);function appendConnecters(e){se("#conectadosss")?e.length&&e.forEach(function(e){se(".connect [data-myme=\"58745812"+e.us+"\"]")||$(".connect > section").append("<article data-myme=\"58745812"+e.us+"\" onclick=\"javascript:createChat({chat:'user_"+e.us+"'})\"><label>"+e.nick+"</label><div style=\"background:url("+e.img+") 0/100%; width:40px; height:40px;\" class=\"images\"></div></article>")}):se(".-as-connects")&&e.length&&e.forEach(function(e){se(".-as-connects [data-myme=\"58745812"+e.us+"\"]")||$(".-as-connects").append(html.connects(e))})}function ListChat(){chatHist.emit("in",{},function(e){e.err||("undefined"!=typeof main&&main.logic.loadResponsiveConnect(e.list),appendConnecters(e.list))})}function windoProgress(t){var e=$("#book > article > form > div > div");e.html(parseInt(Math.round(100*(t.loaded/t.total)))+"%"),e.css({width:parseInt(100*(t.loaded/t.total))+"%"})}function showHistory(e){return"undefined"!=typeof doCanvasDOMCrop&&(doCanvasDOMCrop.data.camera=!1),new Promise(function(t){e.nick=localStorage.nick,notifi.emit("newHistory",e,function(e){t(e),"undefined"!=typeof showHsitoryDOM&&(showHsitoryDOM(e),soundNoti(".."),NoAjaxs=[]),se("#FileName[data-up=\"false\"]")&&(se("#FileName[data-up=\"false\"]").innerHTML=""),$("#NewHistory>input, #NewHistory > .clean, .Compl_comment").fadeIn(500,function(){$("#NewHistory")[0].reset()})}),se("section>#shareDom")&&($("section>#shareDom").hide(500),setTimeout(function(){$("section>#shareDom").remove(),window.addEventListener("keyup",RowStep,!1)},500))})}function reqListener(){var e=this.responseText;""!==e.substring(3)&&showHistory({file:e,user:localStorage.user,history:pruevita})}function adVideoInfo(e,t){e.append("genero",se(".genre").value),e.append("name",se(".name").value),""===se("span#ups>input[type=file]").value?""!==se("input[type=text]#ups").value&&e.append("second",se("input[type=text]#ups").value):e.append("thumbnail",se("span#ups>input[type=file]").files[0]),t(e)}function ajaxPuro(e,t,a){var s,r=new FormData;for(s in t)"prgFn"!==s&&r.append(s,t[s]);var o=new XMLHttpRequest;o.upload.addEventListener("progress",function(e){var a=parseInt(Math.round(100*(e.loaded/e.total)));t.prgFn(a)},!1),o.open("POST",e,!0),o.onload=function(){a(this.responseText)},o.send(r)}function uploadAJAX(e,t,a){var i;clearInterval(tenFavor);var s=new XMLHttpRequest;s.upload.addEventListener("progress",t,!1),s.open("POST",e,!0),a===void 0?(i=new FormData(se("#NewHistory")),i.append("user",localStorage.user),i.append("nick",localStorage.nick),i.append("table","Cronologia"),s.onload=reqListener,s.send(i)):2===a?(i=new FormData(TempImage),i.append("user",localStorage.user),i.append("nick",localStorage.nick),i.append("genero",se(".genre").value),i.append("name",se(".name").value),i.append("artist",se(".artis").value),s.onload=reqListener,s.send(i)):1==a&&(i=new FormData(TempImage),adVideoInfo(i,function(e){i.append("user",localStorage.user),i.append("nick",localStorage.nick),s.onload=reqListener,s.send(e)}))}